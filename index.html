<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACCA TX (UK) FA2024 æ·±åº¦çŸ¥è¯†å›¾è°±</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background-color: #1a1a1a; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        #main { width: 100vw; height: 100vh; }
        
        /* æ‚¬æµ®é¢æ¿æ ·å¼ */
        .info-panel {
            position: absolute; top: 20px; left: 20px; width: 300px;
            background: rgba(40, 40, 40, 0.9); color: #fff;
            padding: 20px; border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1);
            pointer-events: none; z-index: 100;
        }
        .info-panel h1 { margin: 0 0 10px 0; font-size: 22px; color: #4facfe; }
        .info-panel p { font-size: 13px; color: #bbb; line-height: 1.5; margin-bottom: 5px; }
        
        /* Tooltip è‡ªå®šä¹‰æ ·å¼ (ç”¨äºJSä¸­) */
        .tooltip-card {
            max-width: 350px; padding: 5px;
        }
        .tooltip-title { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 8px; border-bottom: 2px solid #4facfe; padding-bottom: 5px; }
        .tooltip-section { margin-bottom: 8px; font-size: 13px; color: #555; }
        .tooltip-label { font-weight: bold; color: #005bea; display: inline-block; width: 60px; vertical-align: top;}
        .tooltip-content { display: inline-block; width: 260px; }
        .formula { background: #f0f4f8; padding: 3px 6px; border-radius: 4px; font-family: monospace; color: #d63031; display: block; margin-top: 2px; }
        .case-box { background: #e8f5e9; border-left: 3px solid #00b894; padding: 5px; margin-top: 4px; font-style: italic; color: #2d3436; }
    </style>
</head>
<body>

    <div class="info-panel">
        <h1>ACCA TX (UK) FA24</h1>
        <p>ğŸ“… <b>é€‚ç”¨è€ƒæœŸ:</b> June 2025 - March 2026</p>
        <p>ğŸ‘† <b>äº¤äº’æŒ‡å—:</b></p>
        <p>â€¢ æ»šè½®ç¼©æ”¾ç”»å¸ƒ</p>
        <p>â€¢ æ‹–æ‹½èŠ‚ç‚¹è°ƒæ•´å¸ƒå±€</p>
        <p>â€¢ <b>é¼ æ ‡æ‚¬åœèŠ‚ç‚¹</b> æŸ¥çœ‹å®šä¹‰ã€å…¬å¼ä¸æ¡ˆä¾‹</p>
        <p style="margin-top:15px; font-size:12px; color:#666;">Designed for visual learning.</p>
    </div>

    <div id="main"></div>

    <script type="text/javascript">
        var chartDom = document.getElementById('main');
        var myChart = echarts.init(chartDom);
        var option;

        // ================= æ•°æ®é›†å®šä¹‰ =================
        
        // 1. ç±»åˆ«é¢œè‰²å®šä¹‰
        const categories = [
            { name: 'Root', itemStyle: { color: '#f39c12' } },
            { name: 'Income Tax', itemStyle: { color: '#e74c3c' } }, // çº¢
            { name: 'Corporation Tax', itemStyle: { color: '#3498db' } }, // è“
            { name: 'CGT', itemStyle: { color: '#9b59b6' } }, // ç´«
            { name: 'IHT', itemStyle: { color: '#2ecc71' } }, // ç»¿
            { name: 'VAT', itemStyle: { color: '#1abc9c' } }  // é’
        ];

        // 2. èŠ‚ç‚¹æ•°æ® (å«è¯¦ç»†è€ƒç‚¹)
        const nodes = [
            // --- æ ¹èŠ‚ç‚¹ ---
            { id: '0', name: 'UK Tax System', symbolSize: 90, category: 0, 
              details: { def: 'è‹±å›½æ ¸å¿ƒç¨åŠ¡ä½“ç³»', rule: 'FA 2024 (25/26 è€ƒçº²)' } },

            // ================= Income Tax (IT) =================
            { id: '1', name: 'Income Tax\n(ä¸ªäººæ‰€å¾—ç¨)', symbolSize: 65, category: 1,
              details: { def: 'é’ˆå¯¹ä¸ªäººå…¨çƒæ”¶å…¥å¾ç¨', rule: 'çº³ç¨å¹´åº¦ï¼š4æœˆ6æ—¥ - æ¬¡å¹´4æœˆ5æ—¥' } },

            { id: '1.1', name: 'Personal Allowance\n(ä¸ªäººå…ç¨é¢)', symbolSize: 45, category: 1,
              details: { 
                  def: 'æ¯ä¸ªçº³ç¨äººçš„å…ç¨æ”¶å…¥é¢åº¦',
                  rule: 'æ ‡å‡†é¢åº¦: Â£12,570 <br> <span class="formula">ANI > Â£100k: æ¯Â£2æ”¶å…¥å‡å°‘Â£1 PA</span>',
                  case: 'ANIä¸ºÂ£110,000ã€‚PAå‡å°‘ (Â£110k-Â£100k)/2 = Â£5,000ã€‚å¯ç”¨PA = Â£7,570ã€‚'
              }},
            
            { id: '1.2', name: 'Employment Income\n(é›‡ä½£æ”¶å…¥)', symbolSize: 45, category: 1,
              details: {
                  def: 'è–ªèµ„ + ç¦åˆ© (Benefits) - å…è®¸æ‰£é™¤è´¹ç”¨',
                  rule: 'ç”¨è½¦ç¦åˆ©: List Price Ã— CO2% (Base 55g/km).<br>ç‡ƒæ²¹ç¦åˆ©: Â£27,800 Ã— CO2%',
                  case: 'æ±½æ²¹è½¦æ’æ”¾120g/kmã€‚<br>ç‡ = 16% + (120-55)/5 = 29%ã€‚<br>Benefit = List Price Ã— 29%ã€‚'
              }},

            { id: '1.3', name: 'NIC (ç¤¾ä¿)', symbolSize: 45, category: 1,
              details: {
                  def: 'å›½æ°‘ä¿é™©è´¡çŒ® (FA24 é‡å¤§æ›´æ–°)',
                  rule: '<b>Class 1 (å‘˜å·¥):</b> Â£12,570-Â£50,270 ä¹‹é—´ç¨ç‡é™ä¸º <span class="formula">8%</span>
